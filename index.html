<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" /> <!-- Mejorado para móviles -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- Fallback para IE -->
  <title>Mi Agenda Personal</title>

  <!-- Google Fonts (mismo, pero con fallback) -->
  <style type="text/css">@font-face {font-family:Roboto;font-style:normal;font-weight:300;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/300/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:300;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/300/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:300;src:url(/cf-fonts/s/roboto/5.0.11/greek/300/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:300;src:url(/cf-fonts/s/roboto/5.0.11/latin/300/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:300;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/300/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:300;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/300/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:300;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/300/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek/400/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin/400/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/400/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/400/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/400/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/400/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:400;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/400/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/latin/500/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/500/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/500/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/500/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/500/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/500/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:500;src:url(/cf-fonts/s/roboto/5.0.11/greek/500/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/greek/700/normal.woff2);unicode-range:U+0370-03FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/vietnamese/700/normal.woff2);unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/latin-ext/700/normal.woff2);unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20CF,U+2113,U+2C60-2C7F,U+A720-A7FF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/greek-ext/700/normal.woff2);unicode-range:U+1F00-1FFF;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic-ext/700/normal.woff2);unicode-range:U+0460-052F,U+1C80-1C88,U+20B4,U+2DE0-2DFF,U+A640-A69F,U+FE2E-FE2F;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/latin/700/normal.woff2);unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;font-display:swap;}@font-face {font-family:Roboto;font-style:normal;font-weight:700;src:url(/cf-fonts/s/roboto/5.0.11/cyrillic/700/normal.woff2);unicode-range:U+0301,U+0400-045F,U+0490-0491,U+04B0-04B1,U+2116;font-display:swap;}</style>
  <!-- Font Awesome (versión actualizada) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <!-- Flatpickr CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- SheetJS para exportar a Excel -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <!-- Supabase Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <!-- Flatpickr JS -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <!-- Flatpickr Locale Español -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/es.js"></script>
</head>

<body>
  <div class="container">
    <header class="header" role="banner">
      <h1><i class="fas fa-calendar-alt"></i> Mi Agenda Personal</h1>
      <p class="subtitle">Registro de Actividades de Diego Rodriguez</p>
    </header>

    <!-- Formulario -->
    <form id="formulario" class="formulario" aria-labelledby="form-title">
      <div class="form-grid">
        <div class="campo date-input-group">
          <label for="startDateInput"><i class="fas fa-calendar-day"></i> Desde:</label>
          <input type="text" id="startDateInput" placeholder="Selecciona fecha desde (DD/MM/YYYY)" required aria-required="true" />
        </div>
        <div class="campo date-input-group">
          <label for="endDateInput"><i class="fas fa-calendar-day"></i> Hasta:</label>
          <input type="text" id="endDateInput" placeholder="Selecciona fecha hasta (DD/MM/YYYY)" required aria-required="true" />
        </div>
        <div class="campo full-width">
          <label for="actividad"><i class="fas fa-tasks"></i> Actividad:</label>
          <textarea id="actividad" required placeholder="Describe qué hiciste..." aria-required="true"></textarea>
        </div>
        <div class="campo">
          <label for="lugar"><i class="fas fa-map-marker-alt"></i> Lugar/Institución:</label>
          <input type="text" id="lugar" required placeholder="Ej. Oficina Central" aria-required="true" />
        </div>
        <div class="campo">
          <label for="permiso"><i class="fas fa-file-signature"></i> Permiso:</label>
          <select id="permiso" required aria-required="true">
            <option value="">Selecciona...</option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
            <option value="No es necesario">No es necesario</option>
          </select>
        </div>
        <div class="campo">
          <label for="viatico"><i class="fas fa-wallet"></i> Viático:</label>
          <select id="viatico" required aria-required="true">
            <option value="">Selecciona...</option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
          </select>
        </div>
<<<<<<< HEAD
=======
        <!-- Campo para imagen -->
>>>>>>> ea7e855957517e43a002d989019ca145c86a9baa
        <div class="campo full-width">
          <label for="imagen"><i class="fas fa-image"></i> Imagen (opcional):</label>
          <input type="file" id="imagen" accept="image/jpeg, image/png, image/gif" aria-describedby="imagen-help" />
          <small id="imagen-help" style="color: #6b7280;">Sube una foto relacionada con la actividad (JPG, PNG, GIF). Máx 5MB.</small>
        </div>
      </div>
      <div class="acciones-form">
        <button type="submit" id="btnGuardar" aria-label="Guardar o Actualizar Actividad"><i class="fas fa-save"></i> Guardar Actividad</button>
        <button type="button" id="btnCancelar" style="display: none;" aria-label="Cancelar Edición"><i class="fas fa-times"></i> Cancelar</button>
      </div>
    </form>

    <!-- Filtros -->
    <div class="filtros" role="search">
      <h3><i class="fas fa-filter"></i> Filtros</h3>
      <div class="filtros-grid">
        <div class="campo-filtro">
          <label for="filtroAnio"><i class="fas fa-calendar"></i> Año:</label>
          <select id="filtroAnio" aria-label="Filtro por Año"></select>
        </div>
        <div class="campo-filtro">
          <label for="filtroMes"><i class="fas fa-calendar"></i> Mes:</label>
          <select id="filtroMes" aria-label="Filtro por Mes">
            <option value="">Todos los meses</option>
            <option value="1">Enero</option>
            <option value="2">Febrero</option>
            <option value="3">Marzo</option>
            <option value="4">Abril</option>
            <option value="5">Mayo</option>
            <option value="6">Junio</option>
            <option value="7">Julio</option>
            <option value="8">Agosto</option>
            <option value="9">Septiembre</option>
            <option value="10">Octubre</option>
            <option value="11">Noviembre</option>
            <option value="12">Diciembre</option>
          </select>
        </div>
        <div class="campo-filtro">
          <label for="filtroRangoDesde"><i class="fas fa-calendar-range"></i> Rango Desde:</label>
          <input type="date" id="filtroRangoDesde" aria-label="Filtro Rango Desde" />
        </div>
        <div class="campo-filtro">
          <label for="filtroRangoHasta"><i class="fas fa-calendar-range"></i> Rango Hasta:</label>
          <input type="date" id="filtroRangoHasta" aria-label="Filtro Rango Hasta" />
        </div>
        <div class="campo-filtro">
          <label for="filtroPermiso"><i class="fas fa-file-signature"></i> Permiso:</label>
          <select id="filtroPermiso" aria-label="Filtro por Permiso">
            <option value="">Todos</option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
            <option value="No es necesario">No es necesario</option>
          </select>
        </div>
        <div class="campo-filtro">
          <label for="filtroViatico"><i class="fas fa-wallet"></i> Viático:</label>
          <select id="filtroViatico" aria-label="Filtro por Viático">
            <option value="">Todos</option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
          </select>
        </div>
        <button id="btnLimpiarFiltros" class="btn-secundario" aria-label="Limpiar Filtros"><i class="fas fa-times"></i> Limpiar</button>
      </div>
      <div class="filtros-grid">
        <button id="btnExportar" class="btn-secundario" aria-label="Exportar a Excel"><i class="fas fa-file-excel"></i> Exportar a Excel</button>
      </div>
    </div>

    <!-- Tabla -->
    <div id="lista" class="tabla-container" role="region" aria-labelledby="tabla-title">
      <h2 id="tabla-title"><i class="fas fa-list"></i> Actividades Guardadas</h2>
      <table id="tablaActividades" aria-describedby="tabla-desc">
        <thead>
          <tr>
<<<<<<< HEAD
            <th><i class="fas fa-calendar icon-fecha"></i> Desde</th>
            <th><i class="fas fa-calendar icon-fecha"></i> Hasta</th>
            <th><i class="fas fa-briefcase icon-actividad"></i> Actividad</th>
            <th><i class="fas fa-location-pin icon-lugar"></i> Lugar</th>
            <th><i class="fas fa-file-alt icon-permiso"></i> Permiso</th>
            <th><i class="fas fa-dollar-sign icon-viatico"></i> Viático</th>
            <th><i class="fas fa-image icon-imagen"></i> Imagen</th>
            <th><i class="fas fa-ellipsis-v icon-acciones"></i> Acciones</th>
=======
            <th scope="col"><i class="fas fa-calendar icon-fecha"></i> Desde</th>
            <th scope="col"><i class="fas fa-calendar icon-fecha"></i> Hasta</th>
            <th scope="col"><i class="fas fa-briefcase icon-actividad"></i> Actividad</th>
            <th scope="col"><i class="fas fa-location-pin icon-lugar"></i> Lugar</th>
            <th scope="col"><i class="fas fa-file-alt icon-permiso"></i> Permiso</th>
            <th scope="col"><i class="fas fa-dollar-sign icon-viatico"></i> Viático</th>
            <th scope="col"><i class="fas fa-image icon-imagen"></i> Imagen</th>
            <th scope="col"><i class="fas fa-ellipsis-v icon-acciones"></i> Acciones</th>
>>>>>>> ea7e855957517e43a002d989019ca145c86a9baa
          </tr>
        </thead>
        <tbody id="tbodyActividades"></tbody>
      </table>
      <p id="mensajeVacio" class="mensaje-vacio" style="display: none;" aria-live="polite">
        <i class="fas fa-info-circle"></i> No hay actividades que coincidan con los filtros.
      </p>

      <!-- Paginación -->
      <div id="paginacion" class="paginacion" style="display: none;" aria-label="Paginación">
        <button id="btnPrev" aria-label="Página Anterior"><i class="fas fa-chevron-left"></i> Anterior</button>
        <span id="infoPagina" aria-live="polite"></span>
        <button id="btnNext" aria-label="Página Siguiente"><i class="fas fa-chevron-right"></i> Siguiente</button>
      </div>
    </div>
  </div>

  <!-- Loader Overlay -->
  <div id="loaderOverlay" aria-hidden="true">
    <div class="loader-content">
      <div class="spinner"></div>
      <p>Cargando actividades...</p>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
